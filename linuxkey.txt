
By default the Linux console produces the same output from (for example)
just keypad-left and shift-keypad-left. Now, since you'll really
want to use the shift-keypad keys for running, you'll need to add
entries for them into the kernel keyboard translation tables.
This is accomplished using the loadkeys -program on a file containing
a keymap.

First you'll need a copy of the keymap normally used by your machine.
On Red Hat-systems you can find out the name from the file
/etc/sysconfig/keyboard. The keymaps reside in the directory
/usr/lib/kbd/keytables, so you can propably figure out the one
you use by looking at the filenames there. Copy this somewhere
safe, like your homedirectory and use your favourite editor on
the copy (not the original, mind you). The keymap might be
compressed, so you might do well to run gunzip on it.

First we'll need to define the functions that the keys will be
bound to, and make them produce strings that we can use to define
the keyboard macros for Crawl. So enter the following lines into
the keymap-file.

--- cut ---
string F101 = "\033[1C~"
string F102 = "\033[2C~"
string F103 = "\033[3C~"
string F104 = "\033[4C~"
string F105 = "\033[5C~"
string F106 = "\033[6C~"
string F107 = "\033[7C~"
string F108 = "\033[8C~"
string F109 = "\033[9C~"

string F111 = "\033[1S~"
string F112 = "\033[2S~"
string F113 = "\033[3S~"
string F114 = "\033[4S~"
string F115 = "\033[5S~"
string F116 = "\033[6S~"
string F117 = "\033[7S~"
string F118 = "\033[8S~"
string F119 = "\033[9S~"
--- cut ---

Then we need to bind the keys to the functions. Search for a line that
along the lines of 'keycode xx = KP_7'. Add the following lines
somewhere close to the line you found.

--- cut ---
control keycode xx = F107
shift   keycode xx = F117
--- cut ---

Of course, you'll need to replace the xx with the value you found in
your own keymap-file. Now, whenever you press Shift-keypad 7 the
computer acts as if you typed an escape, followed by '[7S~'.
Repeat this for all keypad keys, i.e KP_1 - KP_9, but replace
the final digit in the F1-strings with the number of the keypad
key (ie. 'control keycode xx = F108 for KP_8). After that you can load
your new keymap using the loadkeys program on the file.

There should be a macro-file distributed with Crawl that contains
the neccesary definitions for using these new strings. If not, add
the following into the macro.txt in your crawl-directory.

--- cut ---
K:\033[1~
A:y

K:\033[A
A:k

K:\033[5~
A:u

K:\033[D
A:h

K:\033[G
A:.

K:\033[C
A:l

K:\033[4~
A:b

K:\033[B
A:j

K:\033[6~
A:n

K:\033[7S~
A:Y

K:\033[8S~
A:K

K:\033[9S~
A:U

K:\033[4S~
A:H

K:\033[5S~
A:5

K:\033[6S~
A:L

K:\033[1S~
A:B

K:\033[2S~
A:J

K:\033[3S~
A:N
--- cut ---
